<openerp>
    <data>
        <template id="alumni_map">
            <t t-call="website.layout">
                <t t-set="additional_title">Alumni Map</t>
                <div id="wrap">
                    <div class="container">
                        <div class="row">
                            <!--<div class="col-sm-6">
                                <ol class="breadcrumb mt8">
                                    <li>
                                        <a href="/">Home</a>
                                    </li>
                                    <li>Map</li>
                                </ol>
                            </div>
                             <div t-attf-class="form-group col-md-3">
                                <label class="control-label" for="diploma">Adresse</label>
                                <select name="address" class="form-control">
                                    <option value="">Adresse...</option>
                                    <t t-foreach="diplomas or []" t-as="diploma">
                                        <option t-att-value="diploma.id"
                                                t-att-selected="diploma.id == result[0]['diploma_id']">
                                            <t t-esc="diploma.name"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="form-group col-lg-5 text-center" style="margin-top:25px">
                                <button type="submit" class="form-control btn btn-default btn-primary mb32 pull-left">
                                    Chercher
                                    <span class="fa fa-long-arrow-right"/>
                                </button>
                            </div>-->
                            <div class="col-md-4 col-md-offset-4">
                                <div class="warning"><strong>Les marqueurs pointent vers une adresse approximative!</strong></div>
                            </div>
                        </div>
                    </div>
                    <div style="height:800px">
                        <div id="map"/>
                        <script type="text/javascript">
                            var map;
                            function initMap() {
                            map = new google.maps.Map(document.getElementById('map'), {
                            center: {lat: 49.45, lng: 6.515},
                            zoom: 8
                            });
                            <t t-foreach="result or []" t-as="alumni">
                                <t t-if="alumni['lat'] and alumni['lng']">

                                    var marker = new google.maps.Marker({
                                    position: {lat: <t t-esc="alumni['lat']+random.uniform(-0.12,0.12)"/>, lng: <t t-esc="alumni['lng']+random.uniform(-0.12,0.12)"/>},
                                    map: map,
                                    title: '<t t-esc="alumni['name'] if alumni['perso_anciens_ok'] else 'Anonymous'"/>'
                                    });
                                </t>
                            </t>
                            }
                        </script>
                        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmgOJxj5yXID065QjC7aTQLQ9_tzV0HAI&amp;callback=initMap">
                        </script>

                    </div>
                </div>
            </t>
        </template>
    </data>
</openerp>